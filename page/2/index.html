<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">

  <!-- XXX: added by wxz -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
  <!-- XXX: ends here -->

  
  
  <title>混沌猫的窝</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="混沌猫的窝">
<meta property="og:url" content="https://chaoslawful.info/page/2/index.html">
<meta property="og:site_name" content="混沌猫的窝">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="chaoslawful">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="混沌猫的窝" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">混沌猫的窝</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives/">归档</a>
        
          <a class="main-nav-link" href="/about/">关于</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://chaoslawful.info"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-science-numeral-etymology" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2013/09/04/science-numeral-etymology/" class="article-date">
  <time class="dt-published" datetime="2013-09-04T05:49:00.000Z" itemprop="datePublished">2013-09-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2013/09/04/science-numeral-etymology/">科技文献中常见的数词来源</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>之前经常在科技文献中看到这些词的使用：</p>
<ul>
<li>表示数进制的：bin、oct、dec、hex ...</li>
<li>表示参数个数的：nullary、unary、binary、ternay ...</li>
<li>表示倍数的：single、double、triple、quadruple ...</li>
<li>表示优先级的：primary、secondary、tertiary ...</li>
<li>表示几何形状的：triangle、tetragon、pentagon、hexagon ...</li>
</ul>
<p>一直以来却不甚知道为什么用这些词来表达，其含义究竟是什么？最近研究了一番才了解到了一些端倪。大体上是因为现代科学基本上是从古希腊到古罗马一系传承下来的，其用语自然受到希腊语和拉丁语的影响，且由于各个学科门类的出现时间和跨度相差很大，往往会出现多种语源的词汇混合在一起使用的情形。</p>
<p>古希腊人爱好几何学研究，可以猜到几何形状的描述肯定是希腊词根了。而其他很多场景下用的则是拉丁词根或希腊/拉丁组合词根。下面是摘抄自 wikipedia 的一些数字词根：</p>
<ul>
<li>希腊语：</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:right"><strong>数值</strong></th>
<th style="text-align:left"><strong>表基数</strong></th>
<th style="text-align:left"><strong>表倍数</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">1/2</td>
<td style="text-align:left">hemi-</td>
<td style="text-align:left">-</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">hen-</td>
<td style="text-align:left">mono-, haplo-</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">di-, dy-, duo-</td>
<td style="text-align:left">dis-</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">tri-</td>
<td style="text-align:left">tris-,</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">tetra-</td>
<td style="text-align:left">tetrakis-</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:left">penta-</td>
<td style="text-align:left">pentakis-</td>
</tr>
<tr>
<td style="text-align:right">6</td>
<td style="text-align:left">hexa-</td>
<td style="text-align:left">hexakis-</td>
</tr>
<tr>
<td style="text-align:right">7</td>
<td style="text-align:left">hepta-</td>
<td style="text-align:left">heptakis-</td>
</tr>
<tr>
<td style="text-align:right">8</td>
<td style="text-align:left">ogdo-, octa-, octo-</td>
<td style="text-align:left">octakis-</td>
</tr>
<tr>
<td style="text-align:right">9</td>
<td style="text-align:left">ennea-</td>
<td style="text-align:left">enneakis-</td>
</tr>
<tr>
<td style="text-align:right">10</td>
<td style="text-align:left">deca-</td>
<td style="text-align:left">decakis-</td>
</tr>
<tr>
<td style="text-align:right">16</td>
<td style="text-align:left">hexakaideca-, hexadeca-</td>
<td style="text-align:left">hexadecakis-</td>
</tr>
</tbody>
</table>
<ul>
<li>拉丁语：</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:right"><strong>数值</strong></th>
<th style="text-align:left"><strong>表基数</strong></th>
<th style="text-align:left"><strong>表倍数</strong></th>
<th style="text-align:left"><strong>表分配(即每多少个的意思)</strong></th>
<th style="text-align:left"><strong>表序数(即第多少个的意思)</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">1/2</td>
<td style="text-align:left">semi-</td>
<td style="text-align:left">-</td>
<td style="text-align:left">demi-</td>
<td style="text-align:left">-</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">uni-</td>
<td style="text-align:left">sim-</td>
<td style="text-align:left">singul-</td>
<td style="text-align:left">prim-</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">du-</td>
<td style="text-align:left">bi-, bis-</td>
<td style="text-align:left">bin-</td>
<td style="text-align:left">second-</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">tri-</td>
<td style="text-align:left">ter-</td>
<td style="text-align:left">tern-, trin-</td>
<td style="text-align:left">terti-</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">quadri-, quadru-</td>
<td style="text-align:left">quater-</td>
<td style="text-align:left">quatern-</td>
<td style="text-align:left">quart-</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:left">quinque-</td>
<td style="text-align:left">-</td>
<td style="text-align:left">quin-</td>
<td style="text-align:left">quint-</td>
</tr>
<tr>
<td style="text-align:right">6</td>
<td style="text-align:left">sexa-</td>
<td style="text-align:left">-</td>
<td style="text-align:left">sen-</td>
<td style="text-align:left">sext-</td>
</tr>
<tr>
<td style="text-align:right">7</td>
<td style="text-align:left">septem-, septi-</td>
<td style="text-align:left">septem-, septi-</td>
<td style="text-align:left">septen-</td>
<td style="text-align:left">septim-</td>
</tr>
<tr>
<td style="text-align:right">8</td>
<td style="text-align:left">octo-</td>
<td style="text-align:left">-</td>
<td style="text-align:left">octon-</td>
<td style="text-align:left">octav-</td>
</tr>
<tr>
<td style="text-align:right">9</td>
<td style="text-align:left">novem-</td>
<td style="text-align:left">novem-</td>
<td style="text-align:left">noven-</td>
<td style="text-align:left">nona-</td>
</tr>
<tr>
<td style="text-align:right">10</td>
<td style="text-align:left">decem-, dec-</td>
<td style="text-align:left">decem-, dec-</td>
<td style="text-align:left">den-</td>
<td style="text-align:left">decim-</td>
</tr>
<tr>
<td style="text-align:right">16</td>
<td style="text-align:left">sedec-, sexdec-</td>
<td style="text-align:left">sedec-, sexdec-</td>
<td style="text-align:left">sedec-, sexdec-</td>
<td style="text-align:left">sedec-, sexdec-</td>
</tr>
</tbody>
</table>
<p>从拉丁语词根里是不是看到了一些熟悉的东西？呵呵，电影里经常看到的半神 demigod 的 demi- 就是一半的意思，而英语里表达月份的名词实际上就是罗马人用拉丁语数第几个月了，不过个别月份为了纪念神明、节期或皇帝而变更了名称，且原始的罗马历法中一年只有 10 个月，现在的 3 月是当时的第一个月，12 月则是第十个月，漫长的冬日则认为无需计算月份，后来变更历法时才加入现在的 1 月和 2 月。各个月份名的含义如下：</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>月份名称</strong></th>
<th style="text-align:left"><strong>含义</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">January</td>
<td style="text-align:left">取自罗马神话中门神 Janus，表达一年开始的意思</td>
</tr>
<tr>
<td style="text-align:left">February</td>
<td style="text-align:left">取自拉丁语 februum (即净化)，因为这段时间内会举行传统的净化仪式</td>
</tr>
<tr>
<td style="text-align:left">March</td>
<td style="text-align:left">取自罗马神话中战神 Mars</td>
</tr>
<tr>
<td style="text-align:left">April</td>
<td style="text-align:left">可能源自拉丁语 aperire (即开放)，暗示这个季节树木花草都开始发芽，也可能取自希腊神话中美神 Aphrodite</td>
</tr>
<tr>
<td style="text-align:left">May</td>
<td style="text-align:left">取自希腊神话中女神 Maia</td>
</tr>
<tr>
<td style="text-align:left">June</td>
<td style="text-align:left">取自罗马神话中女神 Juno</td>
</tr>
<tr>
<td style="text-align:left">July</td>
<td style="text-align:left">本来叫 Quintillis (即第 5 个月，词根 quin-)，后为纪念皇帝 Julius Caesar 改名</td>
</tr>
<tr>
<td style="text-align:left">August</td>
<td style="text-align:left">本来叫 Sextillis (即第 6 个月，词根 sexa-)，后为纪念皇帝 Augustus 改名</td>
</tr>
<tr>
<td style="text-align:left">September</td>
<td style="text-align:left">即第 7 个月 (词根 septem-)</td>
</tr>
<tr>
<td style="text-align:left">October</td>
<td style="text-align:left">即第 8 个月 (词根 octo-)</td>
</tr>
<tr>
<td style="text-align:left">November</td>
<td style="text-align:left">即第 9 个月 (词根 novem-)</td>
</tr>
<tr>
<td style="text-align:left">December</td>
<td style="text-align:left">即第 10 个月 (词根 decem-)</td>
</tr>
</tbody>
</table>
<p>而计算机中常见的 NULL 或 NIL 则来自拉丁语 nulla 和 nil (表示什么都没有的意思)，不过 nil 在希腊语中也表达类似的意思。表达 16 进制的单词 hexadecimal 比较奇葩，是一个希腊/拉丁混合词，以前有人争论说应该改成纯拉丁词 senidenary 或 sedenary，后来也没能挡住习惯的力量。</p>
<p>参考：</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Numeral_prefix">http://en.wikipedia.org/wiki/Numeral_prefix</a></li>
<li><a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Arity">http://en.wikipedia.org/wiki/Arity</a></li>
<li><a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/List_of_numeral_systems">http://en.wikipedia.org/wiki/List_of_numeral_systems</a></li>
<li><a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Hexadecimal#Etymology">http://en.wikipedia.org/wiki/Hexadecimal#Etymology</a></li>
<li><a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Category:Months">http://en.wikipedia.org/wiki/Category:Months</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://chaoslawful.info/2013/09/04/science-numeral-etymology/" data-id="cl2rftlg0001a8srcfz123vxj" data-title="科技文献中常见的数词来源" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/etymology/" rel="tag">etymology</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-python-mod-package" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2013/08/22/python-mod-package/" class="article-date">
  <time class="dt-published" datetime="2013-08-22T04:34:00.000Z" itemprop="datePublished">2013-08-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2013/08/22/python-mod-package/">如何将 Python 模块打成 DEB/RPM 包</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Python 模块的安装可以用 easy_install 或 pip 方便地完成，但此类工具难以应用在生产系统的部署中。使用 DEB/RPM 包的好处是大规模部署简单、容易回滚且能以一致的方式管理依赖，所以需要将 Python 模块打成此类原生包。</p>
<p>打 RPM 包比较简单，现在的模块一般都是 setuptools 规范的，只要简单地进入模块源码目录，运行 <code>python setup.py bdist_rpm</code> 即可打出 RPM 包。</p>
<p>打 DEB 包需要 <a target="_blank" rel="noopener" href="https://pypi.python.org/pypi/stdeb">stdeb</a> 工具的支持，安装该工具后可以用如下命令打出 DEB 包：</p>
<ul>
<li>下载要打的模块（假设为 uncertainties 模块）源码 tarball，可用命令 <code>pip install -d . uncertainties</code></li>
<li>假设源码包为 <code>uncertainties-2.4.1.tar.gz</code> ，执行 <code>py2dsc uncertainties-2.4.1.tar.gz</code> 将其转换为 Debian 源码包</li>
<li>进入 <code>py2dsc</code> 生成的打包目录打包：
<ul>
<li><code>cd deb_dist/uncertainties-2.4.1/</code></li>
<li><code>dpkg-buildpackage -rfakeroot -uc -us</code></li>
</ul>
</li>
<li>生成的 DEB 包就在上级目录里</li>
</ul>
<p>如果只是想直接安装转换后的 DEB 包，则可以简单地用命令 <code>sudo pypi-install uncertainties</code> 完成，无需使用上面较麻烦的步骤。</p>
<p>参考：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://pypi.python.org/pypi/stdeb">https://pypi.python.org/pypi/stdeb</a></li>
<li><a target="_blank" rel="noopener" href="http://docs.python.org/2.0/dist/creating-rpms.html">http://docs.python.org/2.0/dist/creating-rpms.html</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://chaoslawful.info/2013/08/22/python-mod-package/" data-id="cl2rftlfz00178src8ju97g8b" data-title="如何将 Python 模块打成 DEB/RPM 包" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/deb/" rel="tag">deb</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rpm/" rel="tag">rpm</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-org2blog-left-align-latex" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2013/08/14/org2blog-left-align-latex/" class="article-date">
  <time class="dt-published" datetime="2013-08-14T01:44:00.000Z" itemprop="datePublished">2013-08-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2013/08/14/org2blog-left-align-latex/">org2blog 如何发布左对齐的 LaTeX 公式</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>通常情况下 Wordpress 上的基于 MathJax 显示的 LaTeX 插件总是将独立公式显示为居中对齐的，但当文章中的公式都比较短时居中对齐就显得不太美观。若想让独立公式在文章中总是左对齐，可以在编辑 org2blog 内容时在正文开始前加入如下片段：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/x-mathjax-config&quot;</span>&gt;</span><br><span class="line">MathJax.Hub.Config(&#123;</span><br><span class="line">  displayAlign: <span class="string">&quot;left&quot;</span>,</span><br><span class="line">  displayIndent: <span class="string">&quot;2em&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>这里的 <code>displayIndent</code> 可以控制左对齐公式的缩进宽度，若设为 &quot;0&quot; 就表示同正文平齐。下面是具体的例子：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mo>∫</mo><mi>a</mi><mi>b</mi></msubsup><mi>x</mi><mtext> </mtext><mi>d</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">\int_a^b x\,dx
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.5109580000000005em;vertical-align:-0.9119499999999999em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5990080000000004em;"><span style="top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span><span style="top:-3.812900000000001em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119499999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">x</span></span></span></span></span></p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msubsup><mo>∫</mo><mrow><mo>−</mo><mi mathvariant="normal">∞</mi></mrow><mrow><mo>+</mo><mi mathvariant="normal">∞</mi></mrow></msubsup><msup><mi mathvariant="normal">e</mi><mi>s</mi></msup><mi>x</mi><mtext> </mtext><mi mathvariant="normal">d</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">f(x)=\int_{-\infty}^{+\infty}\mathrm{e}^s x\,\mathrm{d}s
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.491512em;vertical-align:-0.970281em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5212310000000002em;"><span style="top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">∞</span></span></span></span><span style="top:-3.8129000000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">+</span><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.970281em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">e</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7143919999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span></span></span></span></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathrm">d</span></span><span class="mord mathdefault">s</span></span></span></span></span></p>
<p>P.S. 虽然 MathJax 支持直接识别很多 LaTeX 的环境块，但通常 Wordpress 上的 LaTeX 插件仅在检测到自己识别的 LaTeX 标签时才会生成加载 MathJax 的代码，如果 blog 中只使用了 LaTeX 环境块就会导致无法加载 MathJax 而全部显示为普通文本。解决方法是在正文某处显式写一个空内容的可识别 LaTeX 标签欺骗 LaTeX 插件加载 MathJax。</p>
<p>参考：<a target="_blank" rel="noopener" href="https://github.com/mathjax/mathjax-docs/wiki/MathML-alignment-Left-or-Right">https://github.com/mathjax/mathjax-docs/wiki/MathML-alignment-Left-or-Right</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://chaoslawful.info/2013/08/14/org2blog-left-align-latex/" data-id="cl2rftlfy00158srccj7k04jl" data-title="org2blog 如何发布左对齐的 LaTeX 公式" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Emacs/" rel="tag">Emacs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/org2blog/" rel="tag">org2blog</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-org2blog-syntaxhighlight" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2013/08/09/org2blog-syntaxhighlight/" class="article-date">
  <time class="dt-published" datetime="2013-08-09T15:26:00.000Z" itemprop="datePublished">2013-08-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2013/08/09/org2blog-syntaxhighlight/">org2blog 发布语法高亮源码块的注意事项</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Org2blog 要在 Wordpress 中发布语法高亮的源码区块，需要做以下准备：</p>
<ul>
<li>Wordpress 中要安装 SyntaxHighlighter Evolved 插件</li>
<li>emacs 中添加设置以将 pre 区块转换为 sourcecode 区块以让语法高亮插件工作： <code>(setq org2blog/wp-use-sourcecode-shortcode t)</code></li>
</ul>
<p>最后，org2blog 依赖于 org-mode 的 HTML 导出功能，后者总是会转义所有 XML/HTML 特殊字符，但当前版本的 SyntaxHighlighter Evolved 插件也总是会转义这些符号，造成双重转义使高亮输出发生混乱。解决方式是修改 SyntaxHighlighter Evolved 插件，将 <code>syntaxhighlighter.php</code> 中的 <code>encode_shortcode_contents_callback()</code> 函数改为如下形式：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">encode_shortcode_contents_callback</span>(<span class="params"> <span class="variable">$atts</span>, <span class="variable">$code</span> = <span class="string">&#x27;&#x27;</span>, <span class="variable">$tag</span> = <span class="literal">false</span> </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;encoded = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">// <span class="doctag">XXX:</span> modified by wxz</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">false</span> === strpos(<span class="variable">$code</span>, <span class="string">&#x27;&lt;&#x27;</span>) &amp;&amp; <span class="literal">false</span> === strpos(<span class="variable">$code</span>, <span class="string">&#x27;&gt;&#x27;</span>)) &#123;</span><br><span class="line">        <span class="comment">// content already escaped</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// content not escaped yet</span></span><br><span class="line">        <span class="variable">$code</span> = str_replace( array_keys(<span class="keyword">$this</span>-&gt;specialchars), array_values(<span class="keyword">$this</span>-&gt;specialchars), htmlspecialchars( <span class="variable">$code</span> ) );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// <span class="doctag">XXX:</span> ends here</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;[&#x27;</span> . <span class="variable">$tag</span> . <span class="keyword">$this</span>-&gt;atts2string( <span class="variable">$atts</span> ) . <span class="string">&quot;]<span class="subst">&#123;$code&#125;</span>[/<span class="subst">$tag</span>]&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样可以在源码区块内容已经转义的情况下不再进行二次转义，从而解决输出混乱问题。</p>
<p>下面是一个语法高亮的例子：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span> (<span class="string">&quot;Hello, world!\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://chaoslawful.info/2013/08/09/org2blog-syntaxhighlight/" data-id="cl2rftlfv00128srcgvk74zxl" data-title="org2blog 发布语法高亮源码块的注意事项" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Emacs/" rel="tag">Emacs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/org-mode/" rel="tag">org-mode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/org2blog/" rel="tag">org2blog</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-code-too-large" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2013/08/08/code-too-large/" class="article-date">
  <time class="dt-published" datetime="2013-08-08T09:48:00.000Z" itemprop="datePublished">2013-08-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2013/08/08/code-too-large/">编译 Java 程序时出现 code too large 错误的分析</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>我参与的一个实际项目里用到了 ANTLR 3.x 进行 parser 代码自动生成，其中含有大量的 static field 用作状态转移查找表。由于一个 class 中所有 static field 都是放在一个匿名 method 中统一进行初始化，而 Java VM 规范规定一个 class 中单个 method 中 bytecode 长度最多不能超过 65535 bytes，这个自动生成的 parser class 始终无法在 javac 上编译，总是会提示 <code>error: code too large</code> 。但问题是在 Eclipse 中编译使用该文件完全没有问题，由于 65535 bytes 的限制是 Java VM 规范所规定，同生成 class 的编译器没有关系，因此原因只可能是 ecj 生成的 bytecode 比 javac 少，这就有点儿诡异了。</p>
<p>要查看 class 中的字节码可以用 <code>javap</code> 程序完成，通过下面的命令可以将有问题的 class （这里假设是 Test）的静态初始化匿名 method 中所有 bytecode 输出：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javap -c Test | sed -ne <span class="string">&#x27;/static &#123;&#125;/,/return/ p&#x27;</span></span><br></pre></td></tr></table></figure>
<p>将 Test class 的 static field 用对分法逐渐裁剪到 javac 刚好能编译过去，然后用上述命令导出 javac 编译结果和 ecj 编译结果进行对比分析，果然发现了一些差异（测试代码可从<a href="/files/Test.java.gz">此处</a>下载）。</p>
<p>例如如下的这段 Java 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span>[][] FOLLOW_DEFAULT_in_table_option26937 =</span><br><span class="line">    <span class="keyword">new</span> <span class="keyword">long</span>[][]&#123;<span class="keyword">new</span> <span class="keyword">long</span>[]&#123;<span class="number">0x0000000000000000L</span>,<span class="number">0x0000000002000000L</span>&#125;&#125;;</span><br></pre></td></tr></table></figure>
<p>由 ecj 编译产出的 bytecode 为：</p>
<table>
<thead>
<tr>
<th style="text-align:right"><strong>offset</strong></th>
<th style="text-align:left"><strong>bytecode</strong></th>
<th style="text-align:left"><strong>stack</strong> [before]-&gt;[after]</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:left">iconst_1</td>
<td style="text-align:left">-&gt; 1</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">anewarray #idx</td>
<td style="text-align:left">count -&gt; arrayref</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">dup</td>
<td style="text-align:left">value -&gt; value, value</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:left">iconst_0</td>
<td style="text-align:left">-&gt; 0</td>
</tr>
<tr>
<td style="text-align:right">6</td>
<td style="text-align:left">iconst_2</td>
<td style="text-align:left">-&gt; 2</td>
</tr>
<tr>
<td style="text-align:right">7</td>
<td style="text-align:left">newarray long</td>
<td style="text-align:left">count -&gt; arrayref</td>
</tr>
<tr>
<td style="text-align:right">9</td>
<td style="text-align:left">dup</td>
<td style="text-align:left">value -&gt; value, value</td>
</tr>
<tr>
<td style="text-align:right">10</td>
<td style="text-align:left">iconst_1</td>
<td style="text-align:left">-&gt; 1</td>
</tr>
<tr>
<td style="text-align:right">11</td>
<td style="text-align:left">ldc2_w #idx</td>
<td style="text-align:left">-&gt; value</td>
</tr>
<tr>
<td style="text-align:right">14</td>
<td style="text-align:left">lastore</td>
<td style="text-align:left">arrayref, index, value -&gt;</td>
</tr>
<tr>
<td style="text-align:right">15</td>
<td style="text-align:left">aastore</td>
<td style="text-align:left">arrayref, index, value -&gt;</td>
</tr>
<tr>
<td style="text-align:right">16</td>
<td style="text-align:left">pustatic #idx</td>
<td style="text-align:left">value -&gt;</td>
</tr>
</tbody>
</table>
<p>由 javac 编译产出的 bytecode 为：</p>
<table>
<thead>
<tr>
<th style="text-align:right"><strong>offset</strong></th>
<th style="text-align:left"><strong>bytecode</strong></th>
<th style="text-align:left"><strong>stack</strong> [before]-&gt;[after]</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:left">iconst_1</td>
<td style="text-align:left">-&gt; 1</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">anewarray #idx</td>
<td style="text-align:left">count -&gt; arrayref</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">dup</td>
<td style="text-align:left">value -&gt; value, value</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:left">iconst_0</td>
<td style="text-align:left">-&gt; 0</td>
</tr>
<tr>
<td style="text-align:right">6</td>
<td style="text-align:left">iconst_2</td>
<td style="text-align:left">-&gt; 2</td>
</tr>
<tr>
<td style="text-align:right">7</td>
<td style="text-align:left">newarray long</td>
<td style="text-align:left">count -&gt; arrayref</td>
</tr>
<tr>
<td style="text-align:right">9</td>
<td style="text-align:left">dup</td>
<td style="text-align:left">value -&gt; value, value</td>
</tr>
<tr>
<td style="text-align:right">10</td>
<td style="text-align:left">iconst_0</td>
<td style="text-align:left">-&gt; 0</td>
</tr>
<tr>
<td style="text-align:right">11</td>
<td style="text-align:left">iconst_0</td>
<td style="text-align:left">-&gt; 0</td>
</tr>
<tr>
<td style="text-align:right">12</td>
<td style="text-align:left">lastore</td>
<td style="text-align:left">arrayref, index, value -&gt;</td>
</tr>
<tr>
<td style="text-align:right">13</td>
<td style="text-align:left">dup</td>
<td style="text-align:left">value -&gt; value, value</td>
</tr>
<tr>
<td style="text-align:right">14</td>
<td style="text-align:left">iconst_1</td>
<td style="text-align:left">-&gt; 1</td>
</tr>
<tr>
<td style="text-align:right">15</td>
<td style="text-align:left">ldc2_w #idx</td>
<td style="text-align:left">-&gt; value</td>
</tr>
<tr>
<td style="text-align:right">18</td>
<td style="text-align:left">lastore</td>
<td style="text-align:left">arrayref, index, value -&gt;</td>
</tr>
<tr>
<td style="text-align:right">19</td>
<td style="text-align:left">aastore</td>
<td style="text-align:left">arrayref, index, value -&gt;</td>
</tr>
<tr>
<td style="text-align:right">20</td>
<td style="text-align:left">pustatic #idx</td>
<td style="text-align:left">value -&gt;</td>
</tr>
</tbody>
</table>
<p>可以看到 javac 多生成了 offset 10~13 的 bytecode，分析可知这段代码的功能是将内部 long[] 数组第一个元素置为 0。也就是说，ecj 利用了 Java VM 规范中的默认初始化约定，不会为显式初始化为 0 的元素生成赋值 bytecode，但 javac 却会傻傻地按照初始化列表逐个生成 bytecode。这样当非 0 元素初始化很少时，ecj 就比 javac 生成的静态初始化 bytecode 少得多了，自然会发生 javac 编译报 code too large 错误但 ecj 正常的情况。</p>
<p>不过从另一方面看，ANTLR 3.x 生成的 parser 代码也确实没有考虑 Java VM 的 bytecode 长度限制，一旦语法复杂到一定程度，生成的代码很可能连 ecj 都无法编译通过。这是一个比较严重的设计疏忽，希望 ANTLR 后续版本使用变通方法对这一点进行改进。</p>
<h2 id="参考资料"><a class="markdownIt-Anchor" href="#参考资料"></a> 参考资料</h2>
<ul>
<li><a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings">http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings</a></li>
<li><a target="_blank" rel="noopener" href="http://marxsoftware.blogspot.com/2010/01/reproducing-code-too-large-problem-in.html">http://marxsoftware.blogspot.com/2010/01/reproducing-code-too-large-problem-in.html</a></li>
<li><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/243097/javac-error-code-too-large">http://stackoverflow.com/questions/243097/javac-error-code-too-large</a></li>
<li><a target="_blank" rel="noopener" href="http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.6">http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.6</a></li>
<li><a target="_blank" rel="noopener" href="http://www.certpal.com/blogs/2009/08/code-too-large-for-try-statement/">http://www.certpal.com/blogs/2009/08/code-too-large-for-try-statement/</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://chaoslawful.info/2013/08/08/code-too-large/" data-id="cl2rftlfs00108src8ho06quz" data-title="编译 Java 程序时出现 code too large 错误的分析" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ANTLR/" rel="tag">ANTLR</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Eclipse/" rel="tag">Eclipse</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ecj-lombok" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2013/08/08/ecj-lombok/" class="article-date">
  <time class="dt-published" datetime="2013-08-08T03:10:00.000Z" itemprop="datePublished">2013-08-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2013/08/08/ecj-lombok/">在使用 Ecipse Compiler 的 Maven 项目中如何使用 Lombok</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="http://projectlombok.org/">Lombok</a> 借助 javac 的内部 API 介入 annotation 处理环节，并根据其特有的 annotation 在编译期生成代码，能够大大简化 Java 代码很多冗余的写法。但正是因为其依赖于 javac 内部 API，Lombok 很难在其他 Java 编译器上使用，例如常用的替代编译器 Eclipse Compiler (ecj) 就是如此。</p>
<p>为了在非 javac 编译器上也能享受 Lombok 带来的好处，一个可能的方案是实际编译之前先借助 javac 的内部运行时库对 Java 代码进行 delombok 操作，即将被 Lombok 修改后的 Java 代码导出成实际文件，再使用 Eclipse Compiler 这样的替代编译器对导出代码进行真正的编译操作。方法如下：</p>
<ul>
<li>先让 Maven 项目在编译前预先执行 delombok 操作，修改 <code>pom.xml</code> 增加如下内容：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">&lt;!-- 设置 delombok 展开后代码放置位置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sourceDirectory</span>&gt;</span>target/generated-sources/delombok<span class="tag">&lt;/<span class="name">sourceDirectory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">testSourceDirectory</span>&gt;</span>target/generated-test-sources/delombok<span class="tag">&lt;/<span class="name">testSourceDirectory</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.11.8.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">phase</span>&gt;</span>generate-sources<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>delombok<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">addOutputDirectory</span>&gt;</span>false<span class="tag">&lt;/<span class="name">addOutputDirectory</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">sourceDirectory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">sourceDirectory</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">id</span>&gt;</span>test-delombok<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">phase</span>&gt;</span>generate-test-sources<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>testDelombok<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">addOutputDirectory</span>&gt;</span>false<span class="tag">&lt;/<span class="name">addOutputDirectory</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">sourceDirectory</span>&gt;</span>src/test/java<span class="tag">&lt;/<span class="name">sourceDirectory</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>sun.jdk<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>system<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">systemPath</span>&gt;</span>$&#123;java.home&#125;/../lib/tools.jar<span class="tag">&lt;/<span class="name">systemPath</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>如果 Maven 项目还没有使用 Eclipse Compiler，则还要修改 <code>pom.xml</code> 以启用它：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">compilerId</span>&gt;</span>eclipse<span class="tag">&lt;/<span class="name">compilerId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.plexus<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>plexus-compiler-eclipse<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>经过以上配置之后，Maven 项目的实际和测试 Java 代码中即可正常使用 Lombok annotation，也可以在 <code>mvn compile</code> 之后进入 <code>target/generated-sources/delombok/</code> 和 <code>target/generated-test-sources/delombok/</code> 目录自行查看被 Lombok 修改后的实际和测试代码。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://chaoslawful.info/2013/08/08/ecj-lombok/" data-id="cl2rftlfv00118srch0hye4ay" data-title="在使用 Ecipse Compiler 的 Maven 项目中如何使用 Lombok" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Lombok/" rel="tag">Lombok</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Maven/" rel="tag">Maven</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-terratec-dvb-rtl-sdr" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2013/06/18/terratec-dvb-rtl-sdr/" class="article-date">
  <time class="dt-published" datetime="2013-06-17T16:12:00.000Z" itemprop="datePublished">2013-06-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2013/06/18/terratec-dvb-rtl-sdr/">使用 Terratec Cinergy T Stick+ DVB 电视卡进行 RTL-SDR 实验时的几点注意事项</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ul>
<li>Terratec Cinergy T Stick+ 相关驱动仅在 kernel 3.7 及以上版本中并入了主干
<ul>
<li>使用之前版本内核的同学需要自行从 <code>git://linuxtv.org/media_build.git</code> 检出代码编译安装驱动模块</li>
<li>详情见 <a target="_blank" rel="noopener" href="http://www.linuxtv.org/wiki/index.php/TerraTec_Cinergy_T_Stick%2B">http://www.linuxtv.org/wiki/index.php/TerraTec_Cinergy_T_Stick%2B</a></li>
</ul>
</li>
<li>安装 rtl-sdr 工具后，请确保 <code>/etc/udev/rules.d/</code> 中增加了其给出的 udev 规则以对设备结点权限进行修正，否则只有 root 才能访问 DVB 设备</li>
<li>使用 rtl-sdr 等 SDR 工具前，需要将自动加载的 dvb_usb_rtl28xxu 模块卸载，否则 SDR 相关工具会无法打开 DVB 设备并报错，建议检出最新版 rtl-sdr 代码并使用 <code>--enable-driver-detach</code> 选项配置后编译安装，这样 rtl-sdr 工具一旦发现设备被该模块占用便会将其自动卸载。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://chaoslawful.info/2013/06/18/terratec-dvb-rtl-sdr/" data-id="cl2rftlfr000y8srcalvce35w" data-title="使用 Terratec Cinergy T Stick+ DVB 电视卡进行 RTL-SDR 实验时的几点注意事项" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SDR/" rel="tag">SDR</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-gnucash-improv" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2012/11/27/gnucash-improv/" class="article-date">
  <time class="dt-published" datetime="2012-11-26T16:40:00.000Z" itemprop="datePublished">2012-11-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2012/11/27/gnucash-improv/">对 GNUCash 进行的一点儿改进</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>当前版本的 GNUCash 在连接 MySQL 数据库时有个比较严重的字符编码问题：为了兼容 Unicode 字符，GNUCash 在 <code>gnc_dbi_mysql_session_begin()</code> 函数中主动执行 <code>SET NAMES 'utf8'</code> 语句设定 MySQL 连接字符编码为 UTF-8，但遗憾的是用来在连接故障时修复连接的 <code>gnc_dbi_verify_conn()</code> 函数并没有进行类似的操作。一旦数据库连接因网络问题意外断开，用户输入新交易时就会使用 <code>gnc_dbi_verify_conn()</code> 重新创建的新连接，而该连接的字符编码是默认的 latin1，直接后果就是输入中文等字符都变成了一堆乱码。</p>
<p>实际上 GNUCash 底层使用的 libdbi 库是考虑了连接字符编码问题的，其专门提供了一个 &quot;encoding&quot; 的设置选项用来对连接字符编码进行通用设置，底层的各个 driver 在创建连接时都会尊重该设置。所以只要简单地增加该选项，不管连接怎么断开重连，字符编码都能保持正常。</p>
<p>打上附件中的 fix_charset.patch 就可以修正此问题了。</p>
<p>另外，General Ledger 功能实际上非常好用，有了它就不需要在各个 Account 之间来回切换查帐了。但 GNUCash 目前默认在 General Ledger 中只显示最近一个月的交易，可苦了想对更老交易对账的用户。</p>
<p>我对其进行了小小的修改，打上附件中的 enh_general_ledger.patch 即可让 General Ledger 显示当前年度的所有交易，这样对账就非常方便了。</p>
<p><strong>更新：</strong> 最近发现 General Ledger 实际上可以自定义显示日期范围，只要在进入 General Ledger 界面后选择菜单上的 View/Filter...，即可在弹出对话框的 Date 页选择显示起止日期，无需使用附件中的补丁。</p>
<ul>
<li><a href="/files/fix_charset.patch.gz">修正数据库连接断开重连后字符编码错误的补丁</a></li>
<li><a href="/files/enh_general_ledger.patch.gz">让 General Ledger 显示当前年度所有交易的补丁</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://chaoslawful.info/2012/11/27/gnucash-improv/" data-id="cl2rftlfr000x8src72vc3rj4" data-title="对 GNUCash 进行的一点儿改进" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GNUCash/" rel="tag">GNUCash</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/patch/" rel="tag">patch</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-gnucash-repair-malformed-str" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2012/11/18/gnucash-repair-malformed-str/" class="article-date">
  <time class="dt-published" datetime="2012-11-17T17:58:00.000Z" itemprop="datePublished">2012-11-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2012/11/18/gnucash-repair-malformed-str/">修复 GNUCash 数据库中的乱码</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>GNUCash 是一款很好的记账软件，但在使用 MySQL 作为存储后端时，由于其对连接字符集的设置有漏洞，容易出现记账备注中的中文变乱码的情况。此时，可以在 MySQL 中执行如下 SQL 语句完成修复工作：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE splits <span class="keyword">SET</span> memo <span class="operator">=</span> <span class="keyword">CONVERT</span>(<span class="type">BINARY</span>(<span class="keyword">CONVERT</span>(memo <span class="keyword">USING</span> latin1)) <span class="keyword">USING</span> utf8) <span class="keyword">WHERE</span> <span class="keyword">CHAR_LENGTH</span>(<span class="keyword">CONVERT</span>(<span class="type">BINARY</span>(<span class="keyword">CONVERT</span>(memo <span class="keyword">USING</span> latin1)) <span class="keyword">USING</span> utf8)) <span class="operator">!=</span> <span class="keyword">CHAR_LENGTH</span>(memo);</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://chaoslawful.info/2012/11/18/gnucash-repair-malformed-str/" data-id="cl2rftlfp000u8srcgs5r5jkt" data-title="修复 GNUCash 数据库中的乱码" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GNUCash/" rel="tag">GNUCash</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-mele-a2000-archlinux" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2012/10/28/mele-a2000-archlinux/" class="article-date">
  <time class="dt-published" datetime="2012-10-27T18:39:00.000Z" itemprop="datePublished">2012-10-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2012/10/28/mele-a2000-archlinux/">在 Mele A2000 上运行 Archlinux ARM 版</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>本来以为 <a target="_blank" rel="noopener" href="http://archlinuxarm.org">archlinuxarm.org</a> 上有 Mele A100 的安装指南装起来会方便些，但实际操作过程中仍然踩了一些坑，这里记录一下备查。</p>
<p>我选择 Mele A2000 的原因就是因为有 SATA 口，使用最新的 U-boot 后有可能直接把根分区放在 SATA 盘上，这样比起根分区在 SD 卡或 USB2.0 硬盘启动要快很多。遗憾的是，<a target="_blank" rel="noopener" href="http://archlinuxarm.org">archlinuxarm.org</a> 上最新的 sun4i 架构 rootfs 中带的 kernel 内置的启动代码有点儿小问题，在新版 Mele A2000 的板子上会将 SATA 控制器时钟设置错误，导致 kernel 启动挂载 sata 盘分区时循环显示 sata 接口 reset 错误无法继续：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[ 5.530000] ata1: SATA link down (SStatus 1 SControl 300)</span><br><span class="line">[ 5.530000] ata1: EH complete</span><br><span class="line">[ 5.540000] ata1: exception Emask 0x10 SAct 0x0 SErr 0x4000000 action 0xe frozen</span><br><span class="line">[ 5.540000] ata1: irq_stat 0x00000040, connection status changed</span><br><span class="line">[ 5.550000] ata1: SError: &#123; DevExch &#125;</span><br><span class="line">[ 5.550000] ata1: limiting SATA link speed to 1.5 Gbps</span><br><span class="line">[ 5.560000] ata1: hard resetting link</span><br></pre></td></tr></table></figure>
<p>因此只有下载修正后的 kernel 代码自行编译内置了 sw_ahci_platform 模块的 uImage(以 Ubuntu 11.04 为例):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install gcc-arm-linux-gnueabi g++-arm-linux-gnueabi u-boot-tools</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/linux-sunxi/linux-sunxi.git</span><br><span class="line">$ <span class="built_in">cd</span> linux-sunxi</span><br><span class="line">$ make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- sun4i_defconfig</span><br><span class="line">$ make ARCH=arm menuconfig ，将 Device Drivers/Serial ATA and Parallel ATA drivers/SoftWinner Platform AHCI SATA support 从默认的 module 改为 built-in</span><br><span class="line">$ make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- uImage modules</span><br><span class="line">$ make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- INSTALL_MOD_PATH=output modules_install</span><br></pre></td></tr></table></figure>
<p>然后：</p>
<ul>
<li>将 <code>arch/arm/boot/uImage</code> 复制到 SD 卡启动 FAT 分区下覆盖从原 rootfs 中复制过来的同名文件</li>
<li>将 <code>output/lib</code> 目录复制到 sata 盘 rootfs 中的 <code>/usr/</code> 目录下</li>
<li>重新启动应该就能正常从 sata 盘启动了</li>
</ul>
<p>以上过程参考：</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://linux-sunxi.org/Linux">http://linux-sunxi.org/Linux</a></li>
<li><a target="_blank" rel="noopener" href="http://rhombus-tech.net/allwinner_a10/hacking_the_mele_a1000/Building_Debian_From_Source_Code_for_Mele/">http://rhombus-tech.net/allwinner_a10/hacking_the_mele_a1000/Building_Debian_From_Source_Code_for_Mele/</a></li>
</ul>
<p>启动之后的另一个问题就是无线网络，由于 <a target="_blank" rel="noopener" href="http://archlinuxarm.org">archlinuxarm.org</a> 上下载的 rootfs 是最小镜像，连配置网卡所需的 wireless_tools 包都没有装，需要自己编译一个放到 rootfs 里：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget http://www.hpl.hp.com/personal/Jean_Tourrilhes/Linux/wireless_tools.29.tar.gz</span><br><span class="line">tar xzf wireless_tools.29.tar.gz</span><br><span class="line"><span class="built_in">cd</span> wireless_tools.29</span><br><span class="line">make CC=arm-linux-gnueabi-gcc LD=arm-linux-gnueabi-ld</span><br><span class="line">make install PREFIX=&lt;your root fs mount-point&gt;/usr/<span class="built_in">local</span></span><br></pre></td></tr></table></figure>
<p>在你的 rootfs 上新增文件 <code>/etc/ld.so.conf.d/local.conf</code> ，内容只有一行 <code>/usr/local/lib</code> ，保存后运行 <code>ldconfig</code> 刷新动态库缓存</p>
<p>通过 wireless_tools 和 rootfs 中带的 wpa_supplicant 可以手动连接 WPA2 验证的无线网络，过程为：</p>
<ul>
<li>当前目录新增 wpa_supplicant 配置文件 mine.conf，内容为：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ctrl_interface&#x3D;&#x2F;var&#x2F;run&#x2F;wpa_supplicant</span><br><span class="line">eapol_version&#x3D;1</span><br><span class="line">ap_scan&#x3D;1</span><br><span class="line">fast_reauth&#x3D;1</span><br><span class="line"></span><br><span class="line">network&#x3D;&#123;</span><br><span class="line">    ssid&#x3D;&quot;无线接入点名称&quot;</span><br><span class="line">    psk&#x3D;&quot;无线接入密码&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>modprobe 8192cu</code> ，这步很重要！默认没有自动加载 rtl8192cu 无线驱动</li>
<li><code>ip link set wlan0 up</code></li>
<li><code>wpa_supplicant -i wlan0 -c mine.conf -B</code></li>
<li><code>iwconfig wlan0 essid &lt;无线接入点名称&gt;</code></li>
<li><code>dhcpcd wlan0</code>
能上网后一切都好说了。</li>
</ul>
<p>以上过程参考：<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Wireless_Setup#Manual_setup">https://wiki.archlinux.org/index.php/Wireless_Setup#Manual_setup</a></p>
<p><strong>更新：</strong> 目前 <a target="_blank" rel="noopener" href="http://archlinuxarm.org">archlinuxarm.org</a> 上下载的最新镜像已经修正了 SATA 时钟错误问题并内置了 sw_ahci_platform 模块，无需自行编译内核了。另外 wireless_tools 也不用自己编译了，可以直接下载 <a target="_blank" rel="noopener" href="http://cn.mirror.archlinuxarm.org/armv7h/core/wireless_tools-29-8-armv7h.pkg.tar.xz">安装包</a> 用 pacman 安装</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://chaoslawful.info/2012/10/28/mele-a2000-archlinux/" data-id="cl2rftlfp000s8src6fs7729h" data-title="在 Mele A2000 上运行 Archlinux ARM 版" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ARM/" rel="tag">ARM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hack/" rel="tag">hack</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ANTLR/" rel="tag">ANTLR</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ARM/" rel="tag">ARM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Alienware/" rel="tag">Alienware</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/" rel="tag">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Apache/" rel="tag">Apache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Boost/" rel="tag">Boost</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CUDA/" rel="tag">CUDA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DNS/" rel="tag">DNS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ELF/" rel="tag">ELF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Eclipse/" rel="tag">Eclipse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Emacs/" rel="tag">Emacs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Erlang/" rel="tag">Erlang</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ext3/" rel="tag">Ext3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GCC/" rel="tag">GCC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GNUCash/" rel="tag">GNUCash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hyper-V/" rel="tag">Hyper-V</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IPC/" rel="tag">IPC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IPython/" rel="tag">IPython</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JIT/" rel="tag">JIT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lombok/" rel="tag">Lombok</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maven/" rel="tag">Maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NVIDIA/" rel="tag">NVIDIA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Networking/" rel="tag">Networking</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/" rel="tag">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RPM/" rel="tag">RPM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SDR/" rel="tag">SDR</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SELinux/" rel="tag">SELinux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tooky/" rel="tag">Tooky</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/" rel="tag">Ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Virtualization/" rel="tag">Virtualization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WSL/" rel="tag">WSL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Win10/" rel="tag">Win10</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WinXP/" rel="tag">WinXP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XEN/" rel="tag">XEN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deb/" rel="tag">deb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/etymology/" rel="tag">etymology</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hack/" rel="tag">hack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/i18n/" rel="tag">i18n</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kernel/" rel="tag">kernel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/org-mode/" rel="tag">org-mode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/org2blog/" rel="tag">org2blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/patch/" rel="tag">patch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/regexp/" rel="tag">regexp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/resource/" rel="tag">resource</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rpm/" rel="tag">rpm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/utrace/" rel="tag">utrace</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/ANTLR/" style="font-size: 10px;">ANTLR</a> <a href="/tags/ARM/" style="font-size: 10px;">ARM</a> <a href="/tags/Alienware/" style="font-size: 10px;">Alienware</a> <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Apache/" style="font-size: 10px;">Apache</a> <a href="/tags/Boost/" style="font-size: 10px;">Boost</a> <a href="/tags/C/" style="font-size: 10px;">C</a> <a href="/tags/C/" style="font-size: 12.5px;">C++</a> <a href="/tags/CUDA/" style="font-size: 10px;">CUDA</a> <a href="/tags/DNS/" style="font-size: 10px;">DNS</a> <a href="/tags/ELF/" style="font-size: 10px;">ELF</a> <a href="/tags/Eclipse/" style="font-size: 10px;">Eclipse</a> <a href="/tags/Emacs/" style="font-size: 12.5px;">Emacs</a> <a href="/tags/Erlang/" style="font-size: 10px;">Erlang</a> <a href="/tags/Ext3/" style="font-size: 10px;">Ext3</a> <a href="/tags/GCC/" style="font-size: 12.5px;">GCC</a> <a href="/tags/GNUCash/" style="font-size: 12.5px;">GNUCash</a> <a href="/tags/Hyper-V/" style="font-size: 10px;">Hyper-V</a> <a href="/tags/IPC/" style="font-size: 10px;">IPC</a> <a href="/tags/IPython/" style="font-size: 10px;">IPython</a> <a href="/tags/JIT/" style="font-size: 10px;">JIT</a> <a href="/tags/Java/" style="font-size: 17.5px;">Java</a> <a href="/tags/Linux/" style="font-size: 20px;">Linux</a> <a href="/tags/Lombok/" style="font-size: 10px;">Lombok</a> <a href="/tags/Maven/" style="font-size: 10px;">Maven</a> <a href="/tags/NVIDIA/" style="font-size: 10px;">NVIDIA</a> <a href="/tags/Networking/" style="font-size: 15px;">Networking</a> <a href="/tags/PHP/" style="font-size: 10px;">PHP</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/RPM/" style="font-size: 10px;">RPM</a> <a href="/tags/SDR/" style="font-size: 10px;">SDR</a> <a href="/tags/SELinux/" style="font-size: 10px;">SELinux</a> <a href="/tags/Tooky/" style="font-size: 10px;">Tooky</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/Virtualization/" style="font-size: 12.5px;">Virtualization</a> <a href="/tags/WSL/" style="font-size: 12.5px;">WSL</a> <a href="/tags/Win10/" style="font-size: 12.5px;">Win10</a> <a href="/tags/WinXP/" style="font-size: 10px;">WinXP</a> <a href="/tags/XEN/" style="font-size: 10px;">XEN</a> <a href="/tags/deb/" style="font-size: 10px;">deb</a> <a href="/tags/etymology/" style="font-size: 10px;">etymology</a> <a href="/tags/hack/" style="font-size: 12.5px;">hack</a> <a href="/tags/i18n/" style="font-size: 10px;">i18n</a> <a href="/tags/kernel/" style="font-size: 10px;">kernel</a> <a href="/tags/org-mode/" style="font-size: 10px;">org-mode</a> <a href="/tags/org2blog/" style="font-size: 12.5px;">org2blog</a> <a href="/tags/patch/" style="font-size: 10px;">patch</a> <a href="/tags/regexp/" style="font-size: 10px;">regexp</a> <a href="/tags/resource/" style="font-size: 10px;">resource</a> <a href="/tags/rpm/" style="font-size: 10px;">rpm</a> <a href="/tags/utrace/" style="font-size: 10px;">utrace</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">三月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">一月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">十月 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">九月 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">八月 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">六月 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">十一月 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/10/">十月 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/03/">三月 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/02/">二月 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/01/">一月 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/01/">一月 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/12/">十二月 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/08/">八月 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/02/">二月 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/01/">一月 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/12/">十二月 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/11/">十一月 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/07/">七月 2009</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/04/10/win10-home-hyperv-install/">Win10 家庭版上安装 Hyper-V 的方法</a>
          </li>
        
          <li>
            <a href="/2021/04/08/wsl-2-how-to-use-win10-proxy/">在 WSL2 环境中使用 Win10 宿主系统中代理的方法</a>
          </li>
        
          <li>
            <a href="/2021/04/08/null-modem-auto-conf/">自动配置网线直连数据传输方案</a>
          </li>
        
          <li>
            <a href="/2021/04/08/ubuntu-18-04-cuda-memory/">Ubuntu 18.04 LTS 中让桌面系统不占用 N 卡显存的方法</a>
          </li>
        
          <li>
            <a href="/2021/04/08/2021-04-08-centos-6-inst-gcc-4-9/">在 CentOS 6.x 下使用 gcc 4.9.x 的方法</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
        本文采用 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by/4.0/deed.zh">CC BY 4.0 CN协议</a> 进行许可，
可自由转载引用，但需署名作者并注明文章出处。
      
      &copy; 2022 chaoslawful<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives/" class="mobile-nav-link">归档</a>
  
    <a href="/about/" class="mobile-nav-link">关于</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>